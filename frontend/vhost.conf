<VirtualHost *:80>
    DocumentRoot "/usr/local/apache2/htdocs/public/"
    Alias "/admin" "/usr/local/apache2/htdocs/admin/"
    Alias "/uploads" "/usr/local/apache2/htdocs/static/"
    
    ProxyPass /api/ http://backend:8000/
    ProxyPassReverse /api/ http://backend:8000/

    ProxyPass /pma/ http://phpmyadmin:80/
    ProxyPassReverse /pma/ http://phpmyadmin:80/

    <Directory /usr/local/apache2/htdocs/static/>
        Options -Indexes
    </Directory>
    
    <Directory /usr/local/apache2/htdocs/public/>
        Require all granted

        Options Indexes FollowSymLinks

        AllowOverride All

        Options -MultiViews
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteRule ^ index.html [QSA,L]
    </Directory>

    <Directory /usr/local/apache2/htdocs/admin/>
        Require all granted

        Options Indexes FollowSymLinks

        AllowOverride All

        Options -MultiViews
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteRule ^ index.html [QSA,L]
    </Directory>
</VirtualHost>